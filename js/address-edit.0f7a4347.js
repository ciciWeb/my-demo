(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["address-edit"],{"0eaf":function(e,t,a){"use strict";var s=a("7a8b");const c=e=>(Object(s["pushScopeId"])("data-v-81415816"),e=e(),Object(s["popScopeId"])(),e),n={class:"simple-header"},r={key:1},o={class:"simple-header-name"},d=c(()=>Object(s["createElementVNode"])("i",{class:"nbicon nbmore"},null,-1));function i(e,t,a,c,i,u){return Object(s["openBlock"])(),Object(s["createElementBlock"])("header",n,[c.isback?(Object(s["openBlock"])(),Object(s["createElementBlock"])("i",r,"      ")):(Object(s["openBlock"])(),Object(s["createElementBlock"])("i",{key:0,class:"backicon",onClick:t[0]||(t[0]=(...e)=>c.goBack&&c.goBack(...e))})),Object(s["createElementVNode"])("div",o,[Object(s["createTextVNode"])(Object(s["toDisplayString"])(a.name)+" ",1),Object(s["renderSlot"])(e.$slots,"name",{},void 0,!0)]),d])}var u=a("6a81"),l={props:{name:{type:String,default:""},back:{type:String,default:""},noback:{type:Boolean,default:!1}},emits:["callback"],setup(e,t){const a=Object(s["ref"])(e.noback),c=Object(u["d"])(),n=()=>{e.back?c.push({path:e.back}):c.go(-1),t.emit("callback")};return{goBack:n,isback:a}}},b=(a("2f24"),a("b3f2")),f=a.n(b);const p=f()(l,[["render",i],["__scopeId","data-v-81415816"]]);t["a"]=p},"2f24":function(e,t,a){"use strict";a("cf75")},"3f49":function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"f",(function(){return o})),a.d(t,"e",(function(){return d})),a.d(t,"d",(function(){return i}));var s=a("a27e");function c(e){return s["a"].post("/address",e)}function n(e){return s["a"].put("/address",e)}function r(e){return s["a"].delete("/address/"+e)}function o(){return s["a"].get("/address/default")}function d(){return s["a"].get("/address",{pageNumber:1,pageSize:1e3})}function i(e){return s["a"].get("/address/"+e)}},"77d2":function(e,t,a){"use strict";a.r(t);var s=a("7a8b");const c={class:"address-edit-box"};function n(e,t,a,n,r,o){const d=Object(s["resolveComponent"])("s-header"),i=Object(s["resolveComponent"])("van-address-edit");return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",c,[Object(s["createVNode"])(d,{name:""+("add"==e.type?"新增地址":"编辑地址")},null,8,["name"]),Object(s["createVNode"])(i,{class:"edit","area-list":e.areaList,"address-info":e.addressInfo,"show-delete":"edit"==e.type,"show-set-default":"","show-search-result":"","search-result":e.searchResult,"area-columns-placeholder":["请选择","请选择","请选择"],onSave:n.onSave,onDelete:n.onDelete},null,8,["area-list","address-info","show-delete","search-result","onSave","onDelete"])])}a("6d73");var r=a("778e"),o=a("0eaf"),d=a("3f49"),i=a("495f"),u=a("6a81"),l={components:{sHeader:o["a"]},setup(){const e=Object(u["c"])(),t=Object(u["d"])(),a=Object(s["reactive"])({areaList:{province_list:{},city_list:{},county_list:{}},searchResult:[],type:"add",addressId:"",addressInfo:{},from:e.query.from});Object(s["onMounted"])(async()=>{let t={},s={},c={};i["tdist"].getLev1().forEach(e=>{t[e.id]=e.text,i["tdist"].getLev2(e.id).forEach(e=>{s[e.id]=e.text,i["tdist"].getLev3(e.id).forEach(e=>c[e.id]=e.text)})}),a.areaList.province_list=t,a.areaList.city_list=s,a.areaList.county_list=c;const{addressId:n,type:r,from:o}=e.query;if(a.addressId=n,a.type=r,a.from=o||"","edit"==r){const{data:e}=await Object(d["d"])(n);let t="";const s=i["tdist"].getLev1();Object.entries(a.areaList.county_list).forEach(([c,n])=>{if(n==e.regionName){const n=s.findIndex(e=>e.id.substr(0,2)==c.substr(0,2)),r=Object.entries(a.areaList.city_list).filter(([e,t])=>e.substr(0,4)==c.substr(0,4))[0];s[n].text==e.provinceName&&r[1]==e.cityName&&(t=c)}}),a.addressInfo={id:e.addressId,name:e.userName,tel:e.userPhone,province:e.provinceName,city:e.cityName,county:e.regionName,addressDetail:e.detailAddress,areaCode:t,isDefault:!!e.defaultFlag}}});const c=async e=>{const s={userName:e.name,userPhone:e.tel,provinceName:e.province,cityName:e.city,regionName:e.county,detailAddress:e.addressDetail,defaultFlag:e.isDefault?1:0};"edit"==a.type&&(s["addressId"]=a.addressId),"add"==await a.type?Object(d["c"])(s):Object(d["b"])(s),Object(r["a"])("保存成功"),setTimeout(()=>{t.back()},1e3)},n=async()=>{await Object(d["a"])(a.addressId),Object(r["a"])("删除成功"),setTimeout(()=>{t.back()},1e3)};return{...Object(s["toRefs"])(a),onSave:c,onDelete:n}}},b=(a("b5b6"),a("b3f2")),f=a.n(b);const p=f()(l,[["render",n]]);t["default"]=p},a2e5:function(e,t,a){},b5b6:function(e,t,a){"use strict";a("a2e5")},cf75:function(e,t,a){}}]);
//# sourceMappingURL=address-edit.0f7a4347.js.map