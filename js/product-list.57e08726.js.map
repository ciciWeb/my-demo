{"version":3,"sources":["webpack:///./src/views/ProductList.vue","webpack:///./src/service/good.js","webpack:///./src/views/ProductList.vue?34bd","webpack:///./src/views/ProductList.vue?6cf0"],"names":["class","_createElementVNode","src","alt","_createElementBlock","onClick","$setup","_hoisted_5","type","_ctx","$event","_createVNode","_component_van_tabs","color","_component_van_tab","title","name","_component_van_pull_refresh","onRefresh","_component_van_list","loading","finished","finished-text","length","onLoad","onOffset","_Fragment","key","_renderList","item","index","prefix","goodsCoverImg","_toDisplayString","goodsName","goodsIntro","sellingPrice","search","params","axios","get","setup","route","useRoute","router","useRouter","state","reactive","keyword","query","searchBtn","seclectActive","refreshing","list","productList","totalPage","page","orderBy","init","async","categoryId","data","pageNumber","goodsCategoryId","concat","goBack","go","productDetail","push","path","goodsId","getSearch","changeTab","console","log","toRefs","__exports__","render"],"mappings":"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","file":"js/product-list.57e08726.js","sourcesContent":["<!--\n * 严肃声明：\n * 开源版本请务必保留此注释头信息，若删除我方将保留所有法律责任追究！\n * 本系统已申请软件著作权，受国家版权局知识产权以及国家计算机软件著作权保护！\n * 可正常分享和学习源码，不得用于违法犯罪活动，违者必究！\n * Copyright (c) 2020 陈尼克 all rights reserved.\n * 版权所有，侵权必究！\n *\n-->\n\n<template>\n  <div class=\"product-list-wrap\">\n    <div class=\"product-list-content\">\n      <header class=\"category-header wrap\">\n        <i class=\"nbicon nbfanhui\" @click=\"goBack\"></i>\n        <div class=\"header-search\">\n          <i class=\"nbicon nbSearch\"></i>\n          <input\n            type=\"text\"\n            class=\"search-title\"\n            v-model=\"keyword\"/>\n        </div>\n        <span class=\"search-btn\" @click=\"getSearch\">搜索</span>\n      </header>\n      <van-tabs type=\"card\" color=\"#1baeae\" @click=\"changeTab\" >\n        <van-tab title=\"推荐\" name=\"\"></van-tab>\n        <van-tab title=\"新品\" name=\"new\"></van-tab>\n        <van-tab title=\"价格\" name=\"price\"></van-tab>\n      </van-tabs>\n    </div>\n    <div class=\"content\">\n      <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\" class=\"product-list-refresh\">\n        <van-list\n          v-model:loading=\"loading\"\n          :finished=\"finished\"\n          :finished-text=\"productList.length ? '没有更多了' : '搜索想要的商品'\"\n          @load=\"onLoad\"\n          @offset=\"10\"\n        >\n          <!-- <p v-for=\"item in list\" :key=\"item\">{{ item }}</p> -->\n          <template v-if=\"productList.length\">\n            <div class=\"product-item\" v-for=\"(item, index) in productList\" :key=\"index\" @click=\"productDetail(item)\">\n              <img :src=\"$filters.prefix(item.goodsCoverImg)\" />\n              <div class=\"product-info\">\n                <p class=\"name\">{{item.goodsName}}</p>\n                <p class=\"subtitle\">{{item.goodsIntro}}</p>\n                <span class=\"price\">￥ {{item.sellingPrice}}</span>\n              </div>\n            </div>\n          </template>\n          <img class=\"empty\" v-else src=\"https://s.yezgea02.com/1604041313083/kesrtd.png\" alt=\"搜索\">\n        </van-list>\n      </van-pull-refresh>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { search } from '@/service/good'\nexport default {\n  setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const state = reactive({\n      keyword: route.query.keyword || '',\n      searchBtn: false,\n      seclectActive: false,\n      refreshing: false,\n      list: [],\n      loading: false,\n      finished: false,\n      productList: [],\n      totalPage: 0,\n      page: 1,\n      orderBy: ''\n    })\n\n    // onMounted(() => {\n    //   init()\n    // })\n\n    const init = async () => {\n      const { categoryId } = route.query\n      if (!categoryId && !state.keyword) {\n        // Toast.fail('请输入关键词')\n        state.finished = true\n        state.loading = false;\n        return\n      }\n      const { data, data: { list } } = await search({ pageNumber: state.page, goodsCategoryId: categoryId, keyword: state.keyword, orderBy: state.orderBy })\n      \n      state.productList = state.productList.concat(list)\n      state.totalPage = data.totalPage\n      state.loading = false;\n      if (state.page >= data.totalPage) state.finished = true\n    }\n\n    const goBack = () => {\n      router.go(-1)\n    }\n\n    const productDetail = (item) => {\n      router.push({ path: `/product/${item.goodsId}` })\n    }\n\n    const getSearch = () => {\n      onRefresh()\n    }\n\n    const onLoad = () => {\n      if (!state.refreshing && state.page < state.totalPage) {\n        state.page = state.page + 1\n      }\n      if (state.refreshing) {\n        state.productList = [];\n        state.refreshing = false;\n      }\n      init()\n    }\n\n    const onRefresh = () => {\n      state.refreshing = true\n      state.finished = false\n      state.loading = true\n      state.page = 1\n      onLoad()\n    }\n\n    const changeTab = (name) => {\n      console.log('name', name)\n      state.orderBy = name\n      onRefresh()\n    }\n\n    return {\n      ...toRefs(state),\n      goBack,\n      productDetail,\n      getSearch,\n      changeTab,\n      onLoad,\n      onRefresh\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  @import '../common/style/mixin';\n  .product-list-content {\n    position: fixed;\n    left: 0;\n    top: 0;\n    width: 100%;\n    z-index: 1000;\n    background: #fff;\n    .category-header {\n      .fj();\n      width: 100%;\n      height: 50px;\n      line-height: 50px;\n      padding: 0 15px;\n      .boxSizing();\n      font-size: 15px;\n      color: #656771;\n      z-index: 10000;\n      &.active {\n        background: @primary;\n      }\n      .icon-left {\n        font-size: 25px;\n        font-weight: bold;\n      }\n      .header-search {\n        display: flex;\n        width: 76%;\n        height: 20px;\n        line-height: 20px;\n        margin: 10px 0;\n        padding: 5px 0;\n        color: #232326;\n        background: #F7F7F7;\n        .borderRadius(20px);\n        .nbSearch {\n          padding: 0 5px 0 20px;\n          font-size: 17px;\n        }\n        .search-title {\n          font-size: 12px;\n          color: #666;\n          background: #F7F7F7;\n        }\n    }\n    .icon-More {\n      font-size: 20px;\n    }\n    .search-btn {\n      height: 28px;\n      margin: 8px 0;\n      line-height: 28px;\n      padding: 0 5px;\n      color: #fff;\n      background: @primary;\n      .borderRadius(5px);\n      margin-top: 10px;\n    }\n  }\n}\n  .content {\n    height: calc(~\"(100vh - 70px)\");\n    overflow: hidden;\n    overflow-y: scroll; \n    margin-top: 78px;\n  }\n  .product-list-refresh {\n    .product-item {\n      .fj();\n      width: 100%;\n      height: 120px;\n      padding: 10px 0;\n      border-bottom: 1px solid #dcdcdc;\n      img {\n        width: 140px;\n        height: 120px;\n        padding: 0 10px;\n        .boxSizing();\n      }\n      .product-info {\n          width: 56%;\n          height: 120px;\n          padding: 5px;\n          text-align: left;\n          .boxSizing();\n          p {\n            margin: 0\n          }\n          .name {\n            width: 100%;\n            max-height: 40px;\n            line-height: 20px;\n            font-size: 15px;\n            color: #333;\n            overflow: hidden;\n            text-overflow:ellipsis;\n            white-space: nowrap;\n          }\n          .subtitle {\n            width: 100%;\n            max-height: 20px;\n            padding: 10px 0;\n            line-height: 25px;\n            font-size: 13px;\n            color: #999;\n            overflow: hidden;\n          }\n          .price {\n            color: @primary;\n            font-size: 16px;\n          }\n      }\n  }\n  .empty {\n    display: block;\n    width: 150px;\n    margin: 50px auto 20px;\n  }\n}\n</style>\n","\n\nimport axios from '../utils/axios'\n\nexport function getDetail(id) {\n  return axios.get(`/goods/detail/${id}`);\n}\n\nexport function getCategory() {\n  return axios.get('/categories');\n}\n\nexport function search(params) {\n  return axios.get('/search', { params });\n}\n\n","import { render } from \"./ProductList.vue?vue&type=template&id=3b849ce1&scoped=true\"\nimport script from \"./ProductList.vue?vue&type=script&lang=js\"\nexport * from \"./ProductList.vue?vue&type=script&lang=js\"\n\nimport \"./ProductList.vue?vue&type=style&index=0&id=3b849ce1&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\1111111111换过系统后最新文件\\\\NFT\\\\newbee-mall-vue3-app-main\\\\node_modules\\\\_vue-loader@16.8.3@vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3b849ce1\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/_vue-loader@16.8.3@vue-loader/dist/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/_less-loader@7.3.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../node_modules/_vue-loader@16.8.3@vue-loader/dist/index.js??ref--1-1!./ProductList.vue?vue&type=style&index=0&id=3b849ce1&lang=less&scoped=true\""],"sourceRoot":""}