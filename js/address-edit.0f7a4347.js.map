{"version":3,"sources":["webpack:///./src/components/SimpleHeader.vue","webpack:///./src/components/SimpleHeader.vue?08ab","webpack:///./src/components/SimpleHeader.vue?610c","webpack:///./src/service/address.js","webpack:///./src/views/AddressEdit.vue","webpack:///./src/views/AddressEdit.vue?b882","webpack:///./src/views/AddressEdit.vue?33d1"],"names":["class","_createElementVNode","_createElementBlock","$setup","_hoisted_2","onClick","$props","_renderSlot","_ctx","undefined","_hoisted_4","props","name","type","String","default","back","noback","Boolean","emits","setup","ctx","isback","ref","router","useRouter","goBack","push","path","go","emit","__exports__","render","addAddress","params","axios","post","EditAddress","put","DeleteAddress","id","delete","getDefaultAddress","get","getAddressList","pageNumber","pageSize","getAddressDetail","_createVNode","_component_s_header","_component_van_address_edit","area-list","address-info","show-delete","show-set-default","show-search-result","search-result","area-columns-placeholder","onSave","onDelete","components","sHeader","route","useRoute","state","reactive","areaList","province_list","city_list","county_list","searchResult","addressId","addressInfo","from","query","onMounted","async","_province_list","_city_list","_county_list","tdist","getLev1","forEach","p","text","getLev2","c","getLev3","q","data","addressDetail","_areaCode","province","Object","entries","regionName","provinceIndex","findIndex","item","substr","cityItem","filter","cityId","cityName","provinceName","userName","tel","userPhone","city","county","detailAddress","areaCode","isDefault","defaultFlag","content","setTimeout","toRefs"],"mappings":"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","file":"js/address-edit.0f7a4347.js","sourcesContent":["\n\n<template>\n  <header class=\"simple-header \">\n    <i v-if=\"!isback\" class=\"backicon\" @click=\"goBack\"></i>\n    <i v-else>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i>\n    <div class=\"simple-header-name\">\n      {{ name }}\n      <slot name=\"name\"></slot>\n    </div>\n    <i class=\"nbicon nbmore\"></i>\n  </header>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nexport default {\n  props: {\n    name: {\n      type: String,\n      default: ''\n    },\n    back: {\n      type: String,\n      default: ''\n    },\n    noback: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['callback'],\n  setup(props, ctx) {\n    const isback = ref(props.noback)\n    const router = useRouter()\n    const goBack = () => {\n      if (!props.back) {\n        router.go(-1)\n      } else {\n        router.push({ path: props.back })\n      }\n      ctx.emit('callback')\n    }\n    return {\n      goBack,\n      isback\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  @import '../common/style/mixin';\n  .simple-header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 111;\n    .fj();\n    .wh(100%, 26px);\n    background-color:var(--background-color);\n    .boxSizing();\n    padding:30px 30px 40px 30px;\n    .boxSizing();\n    .backicon{\n      width:13px;\n      height:21px;\n      background: url(../assets/image/btn_back.png) center center no-repeat;\n      background-size:100%;\n    }\n    .simple-header-name {\n      font-size: 14px;\n      text-align: right;\n      flex: 1;\n      color:#fff;\n      letter-spacing: 2px;\n      font-family: DINCondensed-Bold, DINCondensed;\n      font-weight: bold;\n    }\n  }\n  .block {\n    height: 44px;\n  }\n</style>\n","import { render } from \"./SimpleHeader.vue?vue&type=template&id=81415816&scoped=true\"\nimport script from \"./SimpleHeader.vue?vue&type=script&lang=js\"\nexport * from \"./SimpleHeader.vue?vue&type=script&lang=js\"\n\nimport \"./SimpleHeader.vue?vue&type=style&index=0&id=81415816&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\1111111111换过系统后最新文件\\\\NFT\\\\newbee-mall-vue3-app-main\\\\node_modules\\\\_vue-loader@16.8.3@vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-81415816\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/_vue-loader@16.8.3@vue-loader/dist/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/_less-loader@7.3.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../node_modules/_vue-loader@16.8.3@vue-loader/dist/index.js??ref--1-1!./SimpleHeader.vue?vue&type=style&index=0&id=81415816&lang=less&scoped=true\"","\nimport axios from '../utils/axios'\n\nexport function addAddress(params) {\n  return axios.post('/address', params);\n}\n\nexport function EditAddress(params) {\n  return axios.put('/address', params);\n}\n\nexport function DeleteAddress(id) {\n  return axios.delete(`/address/${id}`);\n}\n\nexport function getDefaultAddress() {\n  return axios.get('/address/default');\n}\n\nexport function getAddressList() {\n  return axios.get('/address', { pageNumber: 1, pageSize: 1000 })\n}\n\nexport function getAddressDetail(id) {\n  return axios.get(`/address/${id}`)\n}\n\n\n","\n\n<template>\n  <div class=\"address-edit-box\">\n    <s-header :name=\"`${type == 'add' ? '新增地址' : '编辑地址'}`\"></s-header>\n    <van-address-edit\n      class=\"edit\"\n      :area-list=\"areaList\"\n      :address-info=\"addressInfo\"\n      :show-delete=\"type == 'edit'\"\n      show-set-default\n      show-search-result\n      :search-result=\"searchResult\"\n      :area-columns-placeholder=\"['请选择', '请选择', '请选择']\"\n      @save=\"onSave\"\n      @delete=\"onDelete\"\n    />\n  </div>\n</template>\n\n<script>\nimport { reactive, onMounted, toRefs } from 'vue'\nimport { Toast } from 'vant'\nimport sHeader from '@/components/SimpleHeader'\nimport { addAddress, EditAddress, DeleteAddress, getAddressDetail } from '@/service/address'\nimport { tdist } from '@/common/js/utils'\nimport { useRoute, useRouter } from 'vue-router'\nexport default {\n  components: {\n    sHeader\n  },\n  setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const state = reactive({\n      areaList: {\n        province_list: {},\n        city_list: {},\n        county_list: {}\n      },\n      searchResult: [],\n      type: 'add',\n      addressId: '',\n      addressInfo: {},\n      from: route.query.from\n    })\n\n    onMounted(async () => {\n      // 省市区列表构造\n      let _province_list = {}\n      let _city_list = {}\n      let _county_list = {}\n      tdist.getLev1().forEach(p => {\n        _province_list[p.id] = p.text\n        tdist.getLev2(p.id).forEach(c => {\n          _city_list[c.id] = c.text\n          tdist.getLev3(c.id).forEach(q => _county_list[q.id] = q.text)\n        })\n      })\n      state.areaList.province_list = _province_list\n      state.areaList.city_list = _city_list\n      state.areaList.county_list = _county_list\n\n      const { addressId, type, from } = route.query\n      state.addressId = addressId\n      state.type = type\n      state.from = from || ''\n      if (type == 'edit') {\n        const { data: addressDetail } = await getAddressDetail(addressId)\n        let _areaCode = ''\n        const province = tdist.getLev1()\n        Object.entries(state.areaList.county_list).forEach(([id, text]) => {\n          // 先找出当前对应的区\n          if (text == addressDetail.regionName) {\n            // 找到区对应的几个省份\n            const provinceIndex = province.findIndex(item => item.id.substr(0, 2) == id.substr(0, 2))\n            // 找到区对应的几个市区\n            // eslint-disable-next-line no-unused-vars\n            const cityItem = Object.entries(state.areaList.city_list).filter(([cityId, cityName]) => cityId.substr(0, 4) == id.substr(0, 4))[0]\n            // 对比找到的省份和接口返回的省份是否相等，因为有一些区会重名\n            if (province[provinceIndex].text == addressDetail.provinceName && cityItem[1] == addressDetail.cityName) {\n              _areaCode = id\n            }\n          }\n        })\n        state.addressInfo = {\n          id: addressDetail.addressId,\n          name: addressDetail.userName,\n          tel: addressDetail.userPhone,\n          province: addressDetail.provinceName,\n          city: addressDetail.cityName,\n          county: addressDetail.regionName,\n          addressDetail: addressDetail.detailAddress,\n          areaCode: _areaCode,\n          isDefault: !!addressDetail.defaultFlag\n        }\n      }\n    })\n\n    const onSave = async (content) => {\n      const params = {\n        userName: content.name,\n        userPhone: content.tel,\n        provinceName: content.province,\n        cityName: content.city,\n        regionName: content.county,\n        detailAddress: content.addressDetail,\n        defaultFlag: content.isDefault ? 1 : 0,\n      }\n      if (state.type == 'edit') {\n        params['addressId'] = state.addressId\n      }\n      await state.type == 'add' ? addAddress(params) : EditAddress(params)\n      Toast('保存成功')\n      setTimeout(() => {\n        router.back()\n      }, 1000)\n    }\n\n    const onDelete = async () => {\n      await DeleteAddress(state.addressId)\n      Toast('删除成功')\n      setTimeout(() => {\n        router.back()\n      }, 1000)\n    }\n\n    return {\n      ...toRefs(state),\n      onSave,\n      onDelete\n    }\n  }\n}\n</script>\n\n<style lang=\"less\">\n  @import '../common/style/mixin';\n  .edit {\n    .van-field__body {\n      textarea {\n        height: 26px!important;\n      }\n    }\n  }\n  .address-edit-box {\n    .van-address-edit {\n      .van-button--danger {\n        background: @primary;\n        border-color: @primary;\n      }\n      .van-switch--on {\n        background: @primary;\n      }\n    }\n  }\n</style>\n","import { render } from \"./AddressEdit.vue?vue&type=template&id=59be2d53\"\nimport script from \"./AddressEdit.vue?vue&type=script&lang=js\"\nexport * from \"./AddressEdit.vue?vue&type=script&lang=js\"\n\nimport \"./AddressEdit.vue?vue&type=style&index=0&id=59be2d53&lang=less\"\n\nimport exportComponent from \"D:\\\\1111111111换过系统后最新文件\\\\NFT\\\\newbee-mall-vue3-app-main\\\\node_modules\\\\_vue-loader@16.8.3@vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/_vue-loader@16.8.3@vue-loader/dist/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/_less-loader@7.3.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../node_modules/_vue-loader@16.8.3@vue-loader/dist/index.js??ref--1-1!./AddressEdit.vue?vue&type=style&index=0&id=59be2d53&lang=less\""],"sourceRoot":""}